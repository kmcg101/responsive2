<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <!-- cap-initialize:start -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="./jquery-3.2.1.min.js"></script>
    <script src="./capHtml5.js"></script>
    <script src="./initialize.js"></script>
    <!-- <script src="../../_commonAssets/js/test_js.js"></script> -->
    <script>
      $(function () {
        cap.injectArguments();
      });
    </script>

    <!-- cap-initialize:end -->

    <link cap-id="Avenir_Heavy_css" cap-target="href" cap-source="asset" cap-edit="common" cap-name="Avenir_Heavy" cap-category="css" rel="stylesheet" type="text/css" />
    <link cap-id="Avenir_Roman_css" cap-target="href" cap-source="asset" cap-edit="common" cap-name="Avenir_Roman" cap-category="css" rel="stylesheet" type="text/css" />
    <link cap-id="cssReset" cap-target="href" cap-source="asset" cap-category="css" cap-name="reset" cap-edit="common" cap-order="1" rel="stylesheet" type="text/css" />
    <link cap-id="css" cap-target="href" cap-source="asset" cap-edit="upload" cap-order="2" rel="stylesheet" type="text/css" />
  </head>

  <body>
    <div id="fullScreen" class="fullScreen elevator">
      <div class="standardAd">
        <!-- <div class="videoHolder">
          <video id="myVideo" autoplay>
            <source src="./standardad.mp4" type="video/mp4" />
          </video>
        </div> -->
        <div class="interactiveElements">
          <div id="format" class="format"></div>

          <div class="labelTextContainer">
            <div class="version">version 352.101.2</div>
            <div class="textContainer">
              <div class="flexTextContainer">
                <div class="labelText">Copy size:</div>
                <div id="copyCurrentValue" class="copyCurrentValue"></div>
              </div>
              <div class="tableContainer">
                <div class="labelText topMargin40">Copy font size breakpoint values:</div>
                <div class="valueText">Elevator (640x480): 22px</div>
                <div class="valueText">Landscape (1024x720): 31px</div>
                <div class="valueText">Portrait (720x1280): 31px</div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="playerDiv">
        <div id="ourCanvas" class="ourCanvas">
          <div id="workingArea" class="workingArea positionRelative">
            <div class="headlineContainer flexContainerRow flexAlignBaseline">
              <img onerror='this.style.display = "none"' class="inlineImageSizeEqualsText marginRightText" src="./breaking.svg" />

              <div id="headline" class="headline lh-500 txt-clr-primary-900 fs-700 ff-demibold marginRightText">Many expect 2020</div>

              <img onerror='this.style.display = "none"' class="inlineImageSizeEqualsText marginRightText" src="./breaking.svg" />

              <div id="subHeadline" class="subHeadlineText ff-primary fs-300">Sub Headline</div>
            </div>

            <div class="underline"></div>

            <div id="copy" class="copy lh-500 txt-clr-primary-900 fs-500 ff-primary">Close to 4 in 10 Americans expect a better year ahead for them personally, while another half expect things to stay about the same.</div>

            <div class="footerContainer providerLogoSize positionAbsoluteBottomLeft flexContainerRow flexCenterVertical">
              <!-- <div class="footerImageContainer">
                <img src="./2020_Twitter_Logo_White.svg" alt="alt" />
              </div> -->
              <div id="footer" class="footer lh-500 txt-clr-primary-300 fs-300 ff-primary">Footer</div>
            </div>

            <img class="positionAbsoluteBottomRight providerLogoSize" src="../../_commonAssets/images/partner.svg" />
          </div>
        </div>
      </div>
    </div>

    <script>
      document.designMode = "on";

      function clearClassList() {
        const fullScreen = document.getElementById("fullScreen");
        const formatText = document.getElementById("format");
        formatText.innerHTML = "";
        fullScreen.classList.remove("portrait");
        fullScreen.classList.remove("landscape");
        fullScreen.classList.remove("elevator");
      }
      function determineAspectRatioClass() {
        // get the font size of the copy class
        const copyElement = document.getElementById("copy");
        const copyStyle = window.getComputedStyle(copyElement);

        // get the width and height of the working area
        const currentStage = document.getElementById("workingArea");
        const stageWidth = currentStage.offsetWidth;
        const stageHeight = currentStage.offsetHeight;
        //const stageArea = stageWidth * stageHeight;
        const stageAreaAspectRatio = stageWidth / stageHeight;
        console.log("stage width = ", stageWidth);
        console.log("stage height = ", stageHeight);

        const cssRoot = document.querySelector(":root");

        // get width and height of class fullScreen
        // these measurements determine aspect ratio e, l, or p
        let fullScreenContainer = document.getElementById("fullScreen");
        const currentWidth = fullScreenContainer.offsetWidth;
        const currentHeight = fullScreenContainer.offsetHeight;
        const fullScreenAspectRatio = currentWidth / currentHeight;
        console.log("full width = ", currentWidth);
        console.log("full height = ", currentHeight);

        clearClassList();
        const formatText = document.getElementById("format");

        let fontMultiplier = 1;
        let copyValue = 1;

        const fullScreenAspectRatioArray = [1.333, 1.422, 1];
        const stageAreaAspectRatioArray = [4.05, 4.59, 2.21];
        // set to height of ad area to e, l, or p

        // this one is for full screen

        if (fullScreenAspectRatio < fullScreenAspectRatioArray[2]) {
          fullScreenContainer.classList.add("portrait");
          formatText.innerHTML = "Portrait";
          //fontMultiplier = 0.1047;
          //copyValue = stageHeight * fontMultiplier;
          //cssRoot.style.setProperty("--providerLogoHeightRatio", "1.29");
          //console.log(currentHeight * 0.0242);
        } else if (fullScreenAspectRatio < fullScreenAspectRatioArray[1] && fullScreenAspectRatio >= fullScreenAspectRatioArray[2]) {
          fullScreenContainer.classList.add("elevator");
          formatText.innerHTML = "Elevator";
          // fontMultiplier = 0.0359;
          // copyValue = stageWidth * fontMultiplier;
          // cssRoot.style.setProperty("--providerLogoHeightRatio", "1.59");
          // console.log(currentWidth * 0.0344);
        } else {
          fullScreenContainer.classList.add("landscape");
          formatText.innerHTML = "Landscape";
          // fontMultiplier = 0.0323;
          // copyValue = stageWidth * fontMultiplier;
          // cssRoot.style.setProperty("--providerLogoHeightRatio", "1.29");
          // console.log(currentWidth * 0.0302);
        }
        //
        // this is for the content area
        //
        if (stageAreaAspectRatio < stageAreaAspectRatioArray[2]) {
          //fullScreenContainer.classList.add("portrait");
          //formatText.innerHTML = "portrait";
          fontMultiplier = 0.1047;
          copyValue = stageHeight * fontMultiplier;
          cssRoot.style.setProperty("--providerLogoHeightRatio", "1.29");
        }

        // const stageAreaAspectRatioArray = [4.05, 4.55, 2.21];
        else if (stageAreaAspectRatio < stageAreaAspectRatioArray[1] && stageAreaAspectRatio >= stageAreaAspectRatioArray[2]) {
          //fullScreenContainer.classList.add("elevator");
          //formatText.innerHTML = "elevator";
          fontMultiplier = 0.0343;
          copyValue = stageWidth * fontMultiplier;
          cssRoot.style.setProperty("--providerLogoHeightRatio", "1.59");
        }
        //
        else {
          //fullScreenContainer.classList.add("landscape");
          //formatText.innerHTML = "landscape";
          fontMultiplier = 0.0323;
          copyValue = stageWidth * fontMultiplier;
          cssRoot.style.setProperty("--providerLogoHeightRatio", "1.29");
        }

        const copyValueString = copyValue.toString() + "px";
        cssRoot.style.setProperty("--copyFontSize", copyValueString);

        const copyFontSize = copyStyle.getPropertyValue("font-size");
        document.getElementById("copyCurrentValue").innerHTML = copyFontSize;
      }

      $(document).ready(function () {
        console.log("ready");
        setTimeout(() => {
          determineAspectRatioClass();
        }, 70);

        addEventListener("resize", (event) => {
          //populateText();
          determineAspectRatioClass();
        });
      });
    </script>
  </body>
</html>
